@(player: Player)(location: PlayerLocation) 
@main("ARWars") {

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCdrfRsWjuVuIxjonf0mFWeF3v5wztOfxI&sensor=false"></script>
<script src="@routes.Assets.at("javascripts/arwars/geolocation.js")" type="text/javascript" />

<script type="text/javascript">
	var playerId = "@player.getId().toString()";
	var map;
	
	var playerLocationMap = {}

	$(document).ready(function() {
		var mapOptions = {
			center : new google.maps.LatLng(48.133, 11.566),
			zoom : 11,
			mapTypeId : google.maps.MapTypeId.ROADMAP
		};
		map = new google.maps.Map($('#map_canvas')[0],
				mapOptions);
	
		var WS = window['MozWebSocket'] ? MozWebSocket : WebSocket;
		var socket = new WS("@routes.WebSocketController.connect(player.getId().toString()).webSocketURL(request)");
	
		var receiveEvent = function(event) {
			var lat = event.data.latitude;
			var lng = event.data.longitude;
			
			var locationMarker = new google.maps.Marker({
			    position: new google.maps.LatLng(lat, lng),
			    draggable: false
			});
			locationMarker.setMap(map);
		}
		socket.onmessage = receiveEvent
	
		setLocationWatcher();
	
		$(window).resize(function() {
			if ($(this).width() < 768) {
				$('#map_canvas').appendTo('#map_container_mobile');
				var offsetTop = 180;
				$('#map').addClass('in');
				$('#units').removeClass('in');
			} else {
				$('#map_canvas').appendTo('#map_container_desktop');
				var offsetTop = 130;
				$('#units').addClass('in');
			}
			var h = $(window).height();
			$('#map_canvas').css('height', (h - offsetTop));
		}).resize();
	});
</script>

<div class="row-fluid">
	<div class="span4">
		<div class="well sidebar-nav">

			<div class="accordion" id="accordion2">
				<div class="accordion-group visible-phone">
					<div class="accordion-heading">
						<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#map"> Map </a>
					</div>
					<div id="map" class="accordion-body collapse">
						<div id="map_container_mobile" class="accordion-inner">
							<div id="map_canvas"></div>
						</div>
					</div>
				</div>
				<div class="accordion-group">
					<div class="accordion-heading">
						<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#units"> Units </a>
					</div>
					<div id="units" class="accordion-body collapse">
						<div class="accordion-inner">Lorem ipsum dolor sit amet,
							consectetur adipisicing elit, sed do eiusmod tempor incididunt ut
							labore et dolore magna aliqua. Ut enim ad minim veniam, quis
							nostrud exercitation ullamco laboris nisi ut aliquip ex ea
							commodo consequat. Duis aute irure dolor in reprehenderit in
							voluptate velit esse cillum dolore eu fugiat nulla pariatur.
							Excepteur sint occaecat cupidatat non proident, sunt in culpa qui
							officia deserunt mollit anim id est laborum.
						</div>
					</div>
				</div>
				<div class="accordion-group">
					<div class="accordion-heading">
						<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#resources"> Resources </a>
					</div>
					<div id="resources" class="accordion-body collapse">
						<div class="accordion-inner">Lorem ipsum dolor sit amet,
							consectetur adipisicing elit, sed do eiusmod tempor incididunt ut
							labore et dolore magna aliqua. Ut enim ad minim veniam, quis
							nostrud exercitation ullamco laboris nisi ut aliquip ex ea
							commodo consequat. Duis aute irure dolor in reprehenderit in
							voluptate velit esse cillum dolore eu fugiat nulla pariatur.
							Excepteur sint occaecat cupidatat non proident, sunt in culpa qui
							officia deserunt mollit anim id est laborum.
						</div>
					</div>
				</div>
				<div class="accordion-group">
					<div class="accordion-heading">
						<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#team"> Team </a>
					</div>
					<div id="team" class="accordion-body collapse">
						<div class="accordion-inner">Lorem ipsum dolor sit amet,
							consectetur adipisicing elit, sed do eiusmod tempor incididunt ut
							labore et dolore magna aliqua. Ut enim ad minim veniam, quis
							nostrud exercitation ullamco laboris nisi ut aliquip ex ea
							commodo consequat. Duis aute irure dolor in reprehenderit in
							voluptate velit esse cillum dolore eu fugiat nulla pariatur.
							Excepteur sint occaecat cupidatat non proident, sunt in culpa qui
							officia deserunt mollit anim id est laborum.
						</div>
					</div>
				</div>
				<div class="accordion-group">
					<div class="accordion-heading">
						<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#statistics"> Statistics </a>
					</div>
					<div id="statistics" class="accordion-body collapse">
						<div class="accordion-inner">Lorem ipsum dolor sit amet,
							consectetur adipisicing elit, sed do eiusmod tempor incididunt ut
							labore et dolore magna aliqua. Ut enim ad minim veniam, quis
							nostrud exercitation ullamco laboris nisi ut aliquip ex ea
							commodo consequat. Duis aute irure dolor in reprehenderit in
							voluptate velit esse cillum dolore eu fugiat nulla pariatur.
							Excepteur sint occaecat cupidatat non proident, sunt in culpa qui
							officia deserunt mollit anim id est laborum.
						</div>
					</div>
				</div>
			</div>

			<!--<ul class="nav nav-tabs">
				<li class="active"><a href="#">Units</a></li>
				<li><a href="#">Resources</a></li>
				<li><a href="#">Stats</a></li>
				<li><a href="#">Team</a></li>
			</ul-->
			
		</div>
		<!--/sidebar-nav -->
	</div>
	<!--/span-->
	<div id="map_container_desktop" class="span8 hidden-phone">
	</div>
	<!--/span-->
</div>
<!--/row-->
}
